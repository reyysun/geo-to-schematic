![Geo to Schematic logo](https://github.com/reyysun/geo-to-schematic/blob/main/images/btestylelogo.png "BTE Schematic Converter logo")
# Geo to Schematic
* Сonvert KML and Geojson files with geodata into Minecraft schematic files. Geometry elements will be placed in the schematic according to the BuildTheEarth projection.
* Конвертируйте KML и Geojson файлы с геоданными в Minecraft schematic-файлы. Геометрические объекты будут размещены в схематике по проекции BuildTheEarth.

## About
* The converter supports geographic data files in ".kml" and ".geojson" formats.
* Output is a ".schem" schematic (Sponge Schematic v3 for 1.13+) or ".schematic" (Legacy schematic for 1.7-1.12.2).
* Schematic have an origin point, so it can be pasted at the correct coordinates.
* You can specify the block type used for converted objects, as well as a vertical offset for the entire schematic.
## Compatibility
* The converter can handle most KML and GeoJSON files generated by popular software and online converters (tested with Google Earth Pro and QGIS).
* If an geometry object in your file includes elevation data, the converter places it one block below that height in the schematic — e.g., elevation 5 will be Y=4 (so that the F3 menu shows the correct height of 5 when standing on it).
* If no elevation is found, the object is placed at height 0 (Y = -1).
* The "Y Offset" value is applied to the entire schematic last.
### Elevation support
The elevation of a feature in KML or GeoJSON is specified when at least one of the following conditions is met:
* The coordinates of its first point have three values ​​("lat,lon,elev", where elev is the height above sea level);
* The object has a property named "ele", "elev", "elevation", or "elevationStart" (case is not important) with a numeric value.
(Properties are defined in "SimpleData" for KML and "properties" for GeoJSON).

## Инфо
* Конвертер поддерживает файлы географических данных формата ".kml" и ".geojson".
* Выходной файл - схематик ".schem" (Sponge schematic v3 для 1.13+) или ".schematic" (Legacy schematic для 1.7-1.12.2).
* Схематика имеет исходную точку, по которой ее можно вставить на правильные координаты.
* Вы можете указать, из какого блока будут сделаны сконвертированные объекты, а также вертикальный сдвиг всего схематика.
## Совместимость
* Конвертер должен понимать большинство kml и geojson файлов, генерируемых как известными программами, так и онлайн конверторами (протестированы Google Earth Pro и QGis).
* Если у объектов в вашем файле указана высота над уровнем моря, то конвертер расположит их в схематике на 1 блок ниже уровня Y, равном значению высоты. То есть, например, если объект на высоте 5, то в схематике он будет на Y=4 (чтобы в игре, стоя на нем, в F3 отображалась нужная высота).
* Если же у объекта не определена высота, то в схематике он будет расположен на высоте 0 (Y=-1).
* Значение "Y Offset" применяется ко всей схеме в последнюю очередь.
### Поддержка высоты
Конвертер считает, что у объекта в KML или GeoJSON определена высота, когда выполняется одно из следующих условий:
* Координаты первой его точки имеют три значения ("lat,lon,elev", где elev - высота над уровнем моря);
* Объект имеет свойство с названием "ele", "elev", "elevation" или "elevationStart" (регистр не важен), с численным значением. 
(Свойства определяются в поле SimpleData для KML и properties для GeoJSON).

## Credits
* [TerraSketch](https://github.com/Codestian/TerraSketch) for the idea of converting geodata files into schematic. My project was originally started to develop this idea. Use TerraSketch for outlining in BTE projection!
* [SchemToSchematic](https://github.com/PureGero/SchemToSchematic) for the overall design of the page, and also for the list of minecraft 1.12.2 blocks ids
## Modules used
1. [@bte-germany/terraconvert](https://github.com/Nachwahl/terraconvert) - for converting from latlng to minecraft coordinates
2. [prismarine-nbt](https://github.com/PrismarineJS/prismarine-nbt) - for writing NBT data
3. [fflate](https://github.com/101arrowz/fflate) - for NBT compression, and as a lightweight replacement for zlib
4. [browserify](https://browserify.org/) - to compile node.js modules for the browser
5. [terser](https://github.com/terser/terser) - to minify the browserify bundle
## How to build
This project uses [Browserify](https://browserify.org/) to convert `converter.js` into a browser-ready bundle, and [terser](https://github.com/terser/terser) to minify this bundle. You can look up for `ultraconverter.min.js` in gh-pages branch, but it's very large and unreadable. Instead, make changes in `converter.js` and related files, and then bundle it.
1. Clone the main repository
```
git clone https://github.com/reyysun/geo-to-schematic
cd geo-to-schematic
```
2. Install dependencies
```
npm install
```
3. Build the browser bundle
```
npm run build
```
This will build `ultraconverter.js` and minified `ultraconverter.min.js`. Then you can run `index.html` on localhost.